# Moral Compass AI - Environment Variables

# ================================
# Core API Keys (REQUIRED)
# ================================

# OpenAI API Key for AI models and moderation
OPENAI_API_KEY=sk-...

# Pinecone API Key for vector database (RAG)
PINECONE_API_KEY=...
PINECONE_INDEX=moral-compass-ai

# PDF token secret for secure PDF generation
PDF_TOKEN_SECRET=your-secret-key

# ================================
# Redis/Upstash (REQUIRED for production)
# ================================

# Upstash Redis for rate limiting and cost tracking
UPSTASH_REDIS_REST_URL=https://...
UPSTASH_REDIS_REST_TOKEN=...

# Alternative: Vercel KV (compatible with Upstash Redis)
KV_REST_API_URL=https://...
KV_REST_API_TOKEN=...
KV_REST_API_READ_ONLY_TOKEN=...

# Legacy Redis URL (if using direct Redis)
REDIS_URL=redis://...

# ================================
# Security Configuration
# ================================

# Allowed origins for CORS (production only)
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=https://moral-compass-ai.vercel.app,https://your-domain.com

# Allowed bot user agents (optional)
# Comma-separated list of allowed bot user agents
ALLOWED_BOTS=GoogleBot,BingBot

# ================================
# Cost Limits (USD)
# ================================

# Daily cost limit per user/IP
DAILY_COST_LIMIT=5.00

# Hourly cost limit per user/IP
HOURLY_COST_LIMIT=1.00

# Monthly cost limit per user/IP
MONTHLY_COST_LIMIT=50.00

# ================================
# Queue Configuration
# ================================

# Decision processing queue
DECISION_QUEUE_CONCURRENCY=3
DECISION_QUEUE_TIMEOUT=45000
DECISION_QUEUE_INTERVAL_CAP=10
DECISION_QUEUE_INTERVAL=60000

# PDF generation queue
PDF_QUEUE_CONCURRENCY=1
PDF_QUEUE_TIMEOUT=30000
PDF_QUEUE_INTERVAL_CAP=5
PDF_QUEUE_INTERVAL=60000

# Vector search queue
VECTOR_QUEUE_CONCURRENCY=5
VECTOR_QUEUE_TIMEOUT=10000
VECTOR_QUEUE_INTERVAL_CAP=20
VECTOR_QUEUE_INTERVAL=60000

# ================================
# Development Settings
# ================================

# Environment
NODE_ENV=development

# Next.js
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ================================
# Optional: Analytics & Monitoring
# ================================

# Vercel Analytics (if using Vercel)
VERCEL_ANALYTICS_ID=...

# ================================
# Example Configuration Summary
# ================================

# Basic setup (minimum required):
# - OPENAI_API_KEY
# - PINECONE_API_KEY
# - PDF_TOKEN_SECRET
# - KV_REST_API_URL or UPSTASH_REDIS_REST_URL
# - KV_REST_API_TOKEN or UPSTASH_REDIS_REST_TOKEN

# Production setup (recommended):
# - All basic setup variables
# - ALLOWED_ORIGINS
# - Custom cost limits
# - Queue configuration tuning

# Development setup:
# - OPENAI_API_KEY (required)
# - PINECONE_API_KEY (required)
# - PDF_TOKEN_SECRET (required)
# - Redis variables (optional, falls back to in-memory)

# ================================
# Caching Configuration
# ================================

# Cache TTL values (seconds)
CACHE_TTL_EXACT_MATCH=86400        # 24 hours
CACHE_TTL_SEMANTIC=604800          # 7 days
CACHE_TTL_PARTIAL_CONTEXT=2592000  # 30 days
CACHE_TTL_PINECONE_RESULTS=3600    # 1 hour
CACHE_TTL_EMBEDDINGS=604800        # 7 days

# Similarity thresholds (0.0 - 1.0)
CACHE_SIMILARITY_HIGH=0.95         # Nearly identical
CACHE_SIMILARITY_MEDIUM=0.85       # Very similar
CACHE_SIMILARITY_LOW=0.75          # Somewhat similar

# Performance settings
CACHE_MAX_ENTRIES=10000            # Maximum cache entries
CACHE_CLEANUP_BATCH_SIZE=100       # Cleanup batch size
CACHE_EMBEDDING_CACHE_SIZE=1000    # Embedding cache size

# Agent-specific cache settings
CACHE_AGENT_LAW_TTL=604800         # 7 days (legal frameworks stable)
CACHE_AGENT_ENVIRONMENT_TTL=2592000 # 30 days (environmental standards stable)
CACHE_AGENT_ECONOMIST_TTL=259200   # 3 days (economic conditions change)
CACHE_AGENT_PR_TTL=86400           # 1 day (reputation context-sensitive)
CACHE_AGENT_DEI_TTL=1209600        # 14 days (DEI principles stable)
CACHE_AGENT_HEALTH_TTL=172800      # 2 days (health guidelines change)
CACHE_AGENT_AI_RISK_TTL=604800     # 7 days (AI regulations evolving)

# Cache warming (enable/disable)
CACHE_ENABLE_WARMUP=true           # Enable cache warming on startup
CACHE_WARMUP_COMMON_QUERIES=true   # Warm up common AI risk queries

# Cache monitoring
CACHE_ENABLE_MONITORING=true       # Enable cache metrics collection
CACHE_METRICS_RETENTION_DAYS=30    # How long to keep metrics

# Development/Debug settings
CACHE_ENABLE_DEBUG_LOGS=false      # Enable detailed cache debug logs
CACHE_BYPASS_FOR_TESTING=false     # Bypass cache for testing